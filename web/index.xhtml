<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">




    <h:head>
        <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'/>
        <meta name="viewport" content="width=device-width, user-scalable=no"/>
        <meta name="mobile-web-app-capable" content="yes"/>
        <title>#{indexController.labels.appTitle} - #{indexController.labels.organizationName}</title>
        <link rel="stylesheet" type="text/css" href="resources/css/main.css"/>
    </h:head>




    <h:body>

        <h:form id="mainForm" styleClass="myForm">


            <p:growl autoUpdate="true"/>


            <p:sticky target="menu"/>


            <p:menubar id="menu" autoDisplay="false">

                <p:menuitem value="#{indexController.labels.menuItemHome}" 
                            action="#{indexController.showFragment('resources/fragments/home.xhtml')}" 
                            update="mainForm:currentFragment" icon="fa fa-home"/>

                <p:submenu label="#{indexController.labels.menuItemProjects}" icon="fa fa-users">

                    <p:menuitem value="#{indexController.labels.menuItemNewProject}" 
                                action="#{indexController.showFragment('resources/fragments/new.xhtml')}" 
                                update="mainForm:currentFragment" icon="ui-icon-person"/>

                    <p:menuitem value="#{indexController.labels.menuItemExistingProject}" 
                                action="#{indexController.showFragment('resources/fragments/members.xhtml')}" 
                                update="mainForm:currentFragment" icon="ui-icon-refresh"/>
                </p:submenu>

                <p:menuitem value="#{indexController.labels.menuItemAdmin}" 
                            action="#{indexController.showFragment('resources/fragments/admin.xhtml')}"
                            update="mainForm:currentFragment" 
                            icon="fa fa-legal"/>

                <p:menuitem value="#{adminController.currentUser.firstName} #{indexController.labels.menuItemLogout}" 
                            action="#{adminController.logout()}" 
                            icon="fa fa-sign-out" 
                            rendered="#{adminController.currentUserIsAdmin}" 
                            ajax="false" 
                            styleClass="myAdminButton"/>

            </p:menubar>



            <p:spacer/>
            

            <!-- Currently loaded Page Fragment -->
            <p:outputPanel id="currentFragment">
                <ui:include src="#{indexController.currentFragment}"/>
            </p:outputPanel>

            <p:idleMonitor timeout="1080000" onidle="PF('idleDialog').show();"/>

            <!--Session Timeout Dialog-->
            <p:dialog widgetVar="idleDialog" 
                      header="#{indexController.labels.MSGTimeoutHeader}"  
                      modal="true" 
                      closable="false" 
                      resizable="false">
                <h:outputText value="#{indexController.labels.MSGTimeoutBody}" escape="false"/>
                <br/>
                <br/>
                <p:button value="Refresh" onclick="window.location.reload();"/>
            </p:dialog>     




        </h:form>


    </h:body>



</html>

