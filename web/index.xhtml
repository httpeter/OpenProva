<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">








    <f:loadBundle basename="#{indexController.labelFile}" var="labels"/>







    <h:head>
        <meta name="viewport" content="width=device-width, user-scalable=no"/>
        <meta name="mobile-web-app-capable" content="yes"/>
        <title>#{labels.appTitle} - #{labels.organizationName}</title>
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto"/>
        <link rel="stylesheet" type="text/css" href="resources/css/main.css"/>
    </h:head>






    <h:body styleClass="myBody">

        <h:form id="mainForm" styleClass="myForm">

            <p:growl autoUpdate="true"/>

            <p:sticky target="menu"/>






            <p:menubar id="menu" autoDisplay="false">


                <p:menuitem value="#{labels.menuItemHome}" 
                            action="#{indexController.setCurrentFragment('resources/fragments/home.xhtml')}" 
                            update="mainForm:currentFragment" icon="fa fa-home"/>



                <p:submenu label="#{labels.menuItemProjects}" icon="fa fa-users">

                    <p:menuitem value="#{labels.menuItemResubscribe}" 
                                action="#{indexController.setCurrentFragment('resources/fragments/resubscribe.xhtml')}" 
                                update="mainForm:currentFragment" icon="ui-icon-refresh"/>

                    <p:menuitem value="#{labels.menuItemAdmin}" 
                                action="#{indexController.setCurrentFragment('resources/fragments/admin.xhtml')}"
                                update="mainForm:currentFragment" 
                                icon="fa fa-legal"/>

                </p:submenu>


                <p:menuitem value="#{adminController.currentUser.firstName} #{labels.menuItemLogout}" 
                            action="#{adminController.logout()}" 
                            icon="fa fa-sign-out" 
                            rendered="#{adminController.currentUserIsAdmin}" 
                            ajax="false" 
                            styleClass="myAdminButton"/>

            </p:menubar>



            <p:spacer/>












            <p:outputPanel id="currentFragment">
                <ui:include src="#{indexController.currentFragment}"/>
            </p:outputPanel>

            <p:idleMonitor timeout="1080000" onidle="PF('idleDialog').show();"/>












            <!--Session Timeout Dialog-->
            <p:dialog widgetVar="idleDialog" 
                      header="#{labels.MSGTimeoutHeader}"  
                      modal="true" 
                      closable="false" 
                      resizable="false">
                <h:outputText value="#{labels.MSGTimeoutBody}" escape="false"/>
                <br/>
                <br/>
                <p:button value="Refresh" onclick="window.location.reload();"/>
            </p:dialog>     










        </h:form>

    </h:body>

</html>

